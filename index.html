<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tiny RPG Maker</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="styles.css?v=20250208">
    <style>
        #game-container {
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #000;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="app">
        <main>
            <div class="tabs">
                <p class="tabs-title">Tiny RPG Maker</p>
                <div class="tabs-links">
                    <button class="tab-button active" data-tab="game" aria-selected="true">Jogo</button>
                    <button class="tab-button" data-tab="editor" aria-selected="false">Editor</button>
                    <button id="btn-reset" class="tab-action-button" type="button">Reiniciar</button>
                </div>
            </div>

            <div class="tab-content active" id="tab-game">
                <div class="game-container" id="game-container">
                    <div id="combat-indicator" class="combat-indicator" aria-live="polite" aria-atomic="true"></div>
                    <div class="game-screen">
                        <canvas id="game-canvas" width="128" height="152"></canvas>
                        <div id="screen-flash" class="screen-flash" aria-hidden="true"></div>
                    </div>
                    <button
                        id="touch-controls-toggle"
                        class="touch-controls-toggle"
                        type="button"
                        aria-controls="mobile-touch-pad"
                        aria-expanded="false"
                    >
                        Exibir controles
                    </button>
                    <div id="mobile-touch-pad" class="game-touch-pad" aria-hidden="true">
                        <button
                            id="touch-controls-hide"
                            class="touch-controls-hide"
                            type="button"
                            aria-label="Ocultar controles"
                        >
                            Ocultar controles
                        </button>
                        <button class="pad-button pad-up" data-direction="up" aria-label="Mover para cima"></button>
                        <div class="pad-middle-row">
                            <button class="pad-button pad-left" data-direction="left" aria-label="Mover para a esquerda"></button>
                            <button class="pad-button pad-center" tabindex="-1" aria-hidden="true"></button>
                            <button class="pad-button pad-right" data-direction="right" aria-label="Mover para a direita"></button>
                        </div>
                        <button class="pad-button pad-down" data-direction="down" aria-label="Mover para baixo"></button>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="tab-editor">
                <div class="editor-layout">
                    <div class="editor-left">
                        <div class="editor-section editor-section--tiles">
                            <details open>
                                <summary>Tiles</summary>
                                <div class="tiles-panel">
                                    <p id="tile-preset-summary" class="tile-preset-summary"></p>
                                    <div id="tile-list" class="tile-list"></div>
                                </div>
                            </details>
                        </div>

                        <div class="editor-section editor-section--world">
                            <details open>
                                <summary>Mundo</summary>
                                <div class="world-panel">
                                    <div id="world-grid" class="world-grid"></div>
                                </div>
                            </details>
                        </div>

                        <div class="editor-section editor-section--objects">
                            <details open>
                                <summary>Objetos</summary>
                                <div class="objects-panel">
                                    <div id="object-types" class="object-types"></div>
                                    <div id="objects-list" class="objects-list"></div>
                                </div>
                            </details>
                        </div>

                    </div>

                    <div class="editor-center">
                        <div class="editor-section editor-section--map">
                            <h3>Mapa</h3>
                            <canvas id="editor-canvas" width="128" height="128"></canvas>
                        </div>
                    </div>

                    <div class="editor-right">
                        <div class="editor-section editor-section--npcs">
                            <details open>
                                <summary>NPCs</summary>
                                <div class="npcs-panel">
                                    <div id="npcs-list" class="npcs-list"></div>
                                    <div class="npc-editor" hidden>
                                        <label for="npc-text">Dialogo padrao:</label>
                                        <textarea id="npc-text" placeholder="Digite o dialogo do NPC..."></textarea>
                                        <div class="npc-reward-group">
                                            <label for="npc-reward-variable">Ao concluir o dialogo padrao, ativar variavel:</label>
                                            <select id="npc-reward-variable"></select>
                                        </div>
                                        <div class="npc-conditional-toggle">
                                            <button type="button" id="btn-toggle-npc-conditional" aria-expanded="false" aria-controls="npc-conditional-section">Criar dialogo alternativo</button>
                                        </div>
                                        <div id="npc-conditional-section" class="npc-conditional-section" hidden>
                                            <div class="npc-conditional-group">
                                                <label for="npc-conditional-variable">Variavel para dialogo alternativo:</label>
                                                <select id="npc-conditional-variable"></select>
                                                <label for="npc-conditional-text">Texto alternativo:</label>
                                                <textarea id="npc-conditional-text" placeholder="Mensagem exibida quando a variavel estiver ON."></textarea>
                                            </div>
                                            <div class="npc-reward-group npc-conditional-reward">
                                                <label for="npc-conditional-reward-variable">Ao concluir o dialogo alternativo, ativar variavel:</label>
                                                <select id="npc-conditional-reward-variable"></select>
                                            </div>
                                        </div>
                                        <button id="npc-delete">Remover NPC</button>
                                    </div>
                                </div>
                            </details>
                        </div>

                        <div class="editor-section editor-section--enemies">
                            <details open>
                                <summary>Inimigos</summary>
                                <div class="enemies-panel">
                                    <div id="enemy-types" class="enemy-types"></div>
                                    <div id="enemies-list" class="enemies-list"></div>
                                </div>
                            </details>
                        </div>

                        <div class="editor-section editor-section--project">
                            <details open>
                                <summary>Projeto</summary>
                                <div class="project-actions">
                                    <label class="project-field">
                                        <span>Nome do jogo</span>
                                        <input type="text" id="game-title" placeholder="Ex.: Lendas do Vale" maxlength="18">
                                    </label>
                                    <label class="project-field">
                                        <span>Autor</span>
                                        <input type="text" id="game-author" placeholder="Seu nome ou estúdio" maxlength="18">
                                    </label>
                                    <button id="btn-generate-url">Gerar URL do jogo</button>
                                </div>
                                <div class="history-actions">
                                    <button id="btn-undo">Desfazer</button>
                                    <button id="btn-redo">Refazer</button>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <input type="file" id="file-input" accept=".json" style="display: none;">

    <!-- Carregar módulos na ordem correta -->
    <script src="js/core/state/StateWorldManager.js?v=20250208"></script>
    <script src="js/core/state/StatePlayerManager.js?v=20250208"></script>
    <script src="js/core/state/StateDialogManager.js?v=20250208"></script>
    <script src="js/core/state/StateVariableManager.js?v=20250208"></script>
    <script src="js/core/state/StateEnemyManager.js?v=20250208"></script>
    <script src="js/core/state/StateObjectManager.js?v=20250208"></script>
    <script src="js/core/state/StateItemManager.js?v=20250208"></script>
    <script src="js/core/state/StateDataManager.js?v=20250208"></script>
    <script src="js/core/GameState.js?v=20250208"></script>
    <script src="js/core/renderer/RendererConstants.js?v=20250208"></script>
    <script src="js/core/renderer/RendererPalette.js?v=20250208"></script>
    <script src="js/core/renderer/RendererSpriteFactory.js?v=20250208"></script>
    <script src="js/core/renderer/RendererCanvasHelper.js?v=20250208"></script>
    <script src="js/core/renderer/RendererTileRenderer.js?v=20250208"></script>
    <script src="js/core/renderer/RendererEntityRenderer.js?v=20250208"></script>
    <script src="js/core/renderer/RendererDialogRenderer.js?v=20250208"></script>
    <script src="js/core/renderer/RendererHudRenderer.js?v=20250208"></script>
    <script src="js/core/renderer/RendererMinimapRenderer.js?v=20250208"></script>
    <script src="js/core/share/ShareConstants.js?v=20250208"></script>
    <script src="js/core/share/ShareMath.js?v=20250208"></script>
    <script src="js/core/share/ShareBase64.js?v=20250208"></script>
    <script src="js/core/share/ShareTextCodec.js?v=20250208"></script>
    <script src="js/core/share/ShareVariableCodec.js?v=20250208"></script>
    <script src="js/core/share/ShareMatrixCodec.js?v=20250208"></script>
    <script src="js/core/share/SharePositionCodec.js?v=20250208"></script>
    <script src="js/core/share/ShareDataNormalizer.js?v=20250208"></script>
    <script src="js/core/share/ShareEncoder.js?v=20250208"></script>
    <script src="js/core/share/ShareDecoder.js?v=20250208"></script>
    <script src="js/core/share/ShareUrlHelper.js?v=20250208"></script>
    <script src="js/editor/modules/EditorConstants.js?v=20250208"></script>
    <script src="js/editor/modules/EditorDomCache.js?v=20250208"></script>
    <script src="js/editor/modules/EditorState.js?v=20250208"></script>
    <script src="js/editor/modules/EditorHistoryManager.js?v=20250208"></script>
    <script src="js/editor/modules/EditorShareService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorRenderService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorTileService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorNpcService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorEnemyService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorObjectService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorVariableService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorWorldService.js?v=20250208"></script>
    <script src="js/core/TileDefinitions.js?v=20250208"></script>
    <script src="js/core/NPCDefinitions.js?v=20250208"></script>
    <script src="js/core/EnemyDefinitions.js?v=20250208"></script>
    <script src="js/core/ObjectDefinitions.js?v=20250208"></script>
    <script src="js/core/ShareUtils.js?v=20250208"></script>
    <script src="js/core/TileManager.js?v=20250208"></script>
    <script src="js/core/NPCManager.js?v=20250208"></script>
    <script src="js/core/InputManager.js?v=20250208"></script>
    <script src="js/core/Renderer.js?v=20250208"></script>
    <script src="js/core/engine/DialogManager.js?v=20250208"></script>
    <script src="js/core/engine/InteractionManager.js?v=20250208"></script>
    <script src="js/core/engine/EnemyManager.js?v=20250208"></script>
    <script src="js/core/engine/MovementManager.js?v=20250208"></script>
    <script src="js/core/GameEngine.js?v=20250208"></script>
    <script src="js/editor/EditorManager.js?v=20250208"></script>
    <script src="js/main.js?v=20250208"></script>
</body>
</html>










