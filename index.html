<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tiny RPG Maker</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="styles.css?v=20250208">
    <style>
        #game-container {
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #000;
            overflow: hidden;
        }
    </style>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D8S0K3NWFV"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-D8S0K3NWFV');
    </script>
</head>
<body>
    <div class="app">
        <main>
            <div class="tabs">
                <p class="tabs-title" data-text-key="app.title"></p>
                <div class="tabs-links">
                    <button class="tab-button active" data-tab="game" aria-selected="true" data-text-key="tabs.game"></button>
                    <button class="tab-button" data-tab="editor" aria-selected="false" data-text-key="tabs.editor"></button>
                    <button id="btn-reset" class="tab-action-button" type="button" data-text-key="buttons.reset" data-aria-label-key="aria.reset"></button>
                </div>
            </div>

            <div class="tab-content active" id="tab-game">
                <div class="game-container" id="game-container">
                    <div id="combat-indicator" class="combat-indicator" aria-live="polite" aria-atomic="true"></div>
                    <div class="game-screen">
                        <canvas id="game-canvas" width="128" height="152"></canvas>
                        <div id="screen-flash" class="screen-flash" aria-hidden="true"></div>
                    </div>
                    <button
                        id="touch-controls-toggle"
                        class="touch-controls-toggle"
                        type="button"
                        aria-controls="mobile-touch-pad"
                        aria-expanded="false"
                        data-text-key="touchControls.show"
                    ></button>
                    <div id="mobile-touch-pad" class="game-touch-pad" aria-hidden="true">
                        <button
                            id="touch-controls-hide"
                            class="touch-controls-hide"
                            type="button"
                            aria-label=""
                            data-text-key="touchControls.hide"
                            data-aria-label-key="touchControls.hide"
                        ></button>
                        <button class="pad-button pad-up" data-direction="up" aria-label="" data-aria-label-key="touchControls.upLabel"></button>
                        <div class="pad-middle-row">
                            <button class="pad-button pad-left" data-direction="left" aria-label="" data-aria-label-key="touchControls.leftLabel"></button>
                            <button class="pad-button pad-center" tabindex="-1" aria-hidden="true"></button>
                            <button class="pad-button pad-right" data-direction="right" aria-label="" data-aria-label-key="touchControls.rightLabel"></button>
                        </div>
                        <button class="pad-button pad-down" data-direction="down" aria-label="" data-aria-label-key="touchControls.downLabel"></button>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="tab-editor">
                <div class="editor-layout">
                    <div class="editor-left">
                        <div class="editor-section editor-section--tiles" data-mobile-panel="tiles">
                            <details open>
                                <summary data-text-key="sections.tiles"></summary>
                                <div class="tiles-panel">
                                    <p id="tile-preset-summary" class="tile-preset-summary"></p>
                                    <div id="tile-list" class="tile-list"></div>
                                </div>
                            </details>
                        </div>

                        <div class="editor-section editor-section--world" data-mobile-panel="world">
                            <details open>
                                <summary data-text-key="sections.world"></summary>
                                <div class="world-panel">
                                    <div id="world-grid" class="world-grid"></div>
                                </div>
                            </details>
                        </div>

                        <div class="editor-section editor-section--objects" data-mobile-panel="objects">
                            <details open>
                                <summary data-text-key="sections.objects"></summary>
                                <div class="objects-panel">
                                    <div id="object-types" class="object-types"></div>
                                    <div id="objects-list" class="objects-list"></div>
                                </div>
                            </details>
                        </div>

                    </div>

                    <div class="editor-center">
                        <div class="editor-section editor-section--map">
                            <div id="editor-map-position" class="game-minimap" aria-hidden="true"></div>
                            <div class="editor-map-wrapper">
                                <button
                                    type="button"
                                    class="map-nav-button map-nav-button--up"
                                    data-direction="up"
                                    data-aria-label-key="editor.mapNav.up"
                                    data-title-key="editor.mapNav.up"
                                ></button>
                                <button
                                    type="button"
                                    class="map-nav-button map-nav-button--down"
                                    data-direction="down"
                                    data-aria-label-key="editor.mapNav.down"
                                    data-title-key="editor.mapNav.down"
                                ></button>
                                <button
                                    type="button"
                                    class="map-nav-button map-nav-button--left"
                                    data-direction="left"
                                    data-aria-label-key="editor.mapNav.left"
                                    data-title-key="editor.mapNav.left"
                                ></button>
                                <button
                                    type="button"
                                    class="map-nav-button map-nav-button--right"
                                    data-direction="right"
                                    data-aria-label-key="editor.mapNav.right"
                                    data-title-key="editor.mapNav.right"
                                ></button>
                                <canvas id="editor-canvas" width="384" height="384"></canvas>
                            </div>
                            <div class="editor-mobile-nav" aria-label="" data-aria-label-key="editor.mobileNav.label">
                                <button type="button" class="editor-mobile-nav-button active" data-mobile-target="tiles" data-title-key="editor.mobileNav.tiles" data-aria-label-key="editor.mobileNav.tiles">üß±</button>
                                <button type="button" class="editor-mobile-nav-button" data-mobile-target="world" data-title-key="editor.mobileNav.world" data-aria-label-key="editor.mobileNav.world">üó∫Ô∏è</button>
                                <button type="button" class="editor-mobile-nav-button" data-mobile-target="objects" data-title-key="editor.mobileNav.objects" data-aria-label-key="editor.mobileNav.objects">üéí</button>
                                <button type="button" class="editor-mobile-nav-button" data-mobile-target="npcs" data-title-key="editor.mobileNav.npcs" data-aria-label-key="editor.mobileNav.npcs">üßç</button>
                                <button type="button" class="editor-mobile-nav-button" data-mobile-target="enemies" data-title-key="editor.mobileNav.enemies" data-aria-label-key="editor.mobileNav.enemies">üëπ</button>
                                <button type="button" class="editor-mobile-nav-button" data-mobile-target="project" data-title-key="editor.mobileNav.project" data-aria-label-key="editor.mobileNav.project">üìÅ</button>
                            </div>
                        </div>
                    </div>

                    <div class="editor-right">
                        <div class="editor-section editor-section--npcs" data-mobile-panel="npcs">
                            <details open>
                                <summary data-text-key="sections.npcs"></summary>
                                <div class="npcs-panel">
                                    <div class="npc-variant-selector">
                                        <div class="npc-variant-buttons">
                                            <button type="button" class="npc-variant-button active" data-npc-variant-filter="human" aria-pressed="true" data-text-key="npc.variant.human"></button>
                                            <button type="button" class="npc-variant-button" data-npc-variant-filter="elf" aria-pressed="false" data-text-key="npc.variant.elf"></button>
                                            <button type="button" class="npc-variant-button" data-npc-variant-filter="dwarf" aria-pressed="false" data-text-key="npc.variant.dwarf"></button>
                                        </div>
                                    </div>
                                    <div id="npcs-list" class="npcs-list"></div>
                                    <div class="npc-editor" hidden>
                                        <label for="npc-text" data-text-key="npc.dialog.defaultLabel"></label>
                                        <textarea id="npc-text" data-placeholder-key="npc.dialog.placeholder"></textarea>
                                        <div class="npc-reward-group">
                                            <label for="npc-reward-variable" data-text-key="npc.reward.defaultLabel"></label>
                                            <select id="npc-reward-variable"></select>
                                        </div>
                                        <div class="npc-conditional-toggle">
                                            <button type="button" id="btn-toggle-npc-conditional" aria-expanded="false" aria-controls="npc-conditional-section" data-text-key="npc.toggle.create"></button>
                                        </div>
                                        <div id="npc-conditional-section" class="npc-conditional-section" hidden>
                                            <div class="npc-conditional-group">
                                                <label for="npc-conditional-variable" data-text-key="npc.conditional.variableLabel"></label>
                                                <select id="npc-conditional-variable"></select>
                                                <label for="npc-conditional-text" data-text-key="npc.conditional.textLabel"></label>
                                                <textarea id="npc-conditional-text" data-placeholder-key="npc.conditional.placeholder"></textarea>
                                            </div>
                                            <div class="npc-reward-group npc-conditional-reward">
                                                <label for="npc-conditional-reward-variable" data-text-key="npc.conditional.rewardLabel"></label>
                                                <select id="npc-conditional-reward-variable"></select>
                                            </div>
                                        </div>
                                        <button id="npc-delete" data-text-key="npc.delete"></button>
                                    </div>
                                </div>
                            </details>
                        </div>

                        <div class="editor-section editor-section--enemies" data-mobile-panel="enemies">
                            <details open>
                                <summary data-text-key="sections.enemies"></summary>
                                <div class="enemies-panel">
                                    <div id="enemy-types" class="enemy-types"></div>
                                    <div id="enemies-list" class="enemies-list"></div>
                                </div>
                            </details>
                        </div>

                        <div class="editor-section editor-section--project" data-mobile-panel="project">
                            <details open>
                                <summary data-text-key="sections.project"></summary>
                                <div class="project-actions">
                                    <div id="project-variables-container" class="project-variables">
                                        <button id="project-variables-toggle" class="project-variables__toggle" type="button"></button>
                                        <div id="project-variable-usage-list" class="project-variables__list"></div>
                                    </div>
                                    <div id="project-skills-container" class="project-variables project-variables--skills">
                                        <button id="project-skills-toggle" class="project-variables__toggle" type="button"></button>
                                        <div id="project-skills-list" class="project-variables__list project-skills__list"></div>
                                    </div>
                                    <label class="project-field">
                                        <span data-text-key="project.titleLabel"></span>
                                        <input type="text" id="game-title" data-placeholder-key="project.titlePlaceholder" maxlength="18">
                                    </label>
                                    <label class="project-field">
                                        <span data-text-key="project.authorLabel"></span>
                                        <input type="text" id="game-author" data-placeholder-key="project.authorPlaceholder" maxlength="18">
                                    </label>
                                    <label class="project-field project-field--language">
                                        <span data-text-key="project.languageLabel"></span>
                                        <select id="language-select">
                                            <option value="pt-BR" data-text-key="language.option.ptBR"></option>
                                            <option value="en-US" data-text-key="language.option.enUS"></option>
                                        </select>
                                    </label>
                                    <p class="project-share-hint" data-text-key="project.shareHint"></p>
                                    <button id="btn-generate-url" data-text-key="project.generateUrl"></button>
                                    <button id="btn-generate-html" data-text-key="project.generateHTML"></button>
                                </div>
                            </details>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <input type="file" id="file-input" accept=".json" style="display: none;">

    <!-- Carregar m√≥dulos na ordem correta -->
    <script src="js/core/TextResources.js?v=20250208"></script>
    <script src="js/core/SkillDefinitions.js?v=20250208"></script>
    <script src="js/core/state/StateWorldManager.js?v=20250208"></script>
    <script src="js/core/state/StateSkillManager.js?v=20250208"></script>
    <script src="js/core/state/StatePlayerManager.js?v=20250208"></script>
    <script src="js/core/state/StateDialogManager.js?v=20250208"></script>
    <script src="js/core/state/StateVariableManager.js?v=20250208"></script>
    <script src="js/core/state/StateEnemyManager.js?v=20250208"></script>
    <script src="js/core/state/StateObjectManager.js?v=20250208"></script>
    <script src="js/core/state/StateItemManager.js?v=20250208"></script>
    <script src="js/core/state/GameStateLifecycle.js?v=20250208"></script>
    <script src="js/core/state/GameStateScreenManager.js?v=20250208"></script>
    <script src="js/core/state/GameStateWorldFacade.js?v=20250208"></script>
    <script src="js/core/state/GameStatePlayerFacade.js?v=20250208"></script>
    <script src="js/core/state/GameStateDataFacade.js?v=20250208"></script>
    <script src="js/core/state/StateDataManager.js?v=20250208"></script>
    <script src="js/core/GameState.js?v=20250208"></script>
    <script src="js/core/sprites/PlayerSprites.js?v=20250208"></script>
    <script src="js/core/sprites/NpcSprites.js?v=20250208"></script>
    <script src="js/core/sprites/EnemySprites.js?v=20250208"></script>
    <script src="js/core/sprites/ObjectSprites.js?v=20250208"></script>
    <script src="js/core/sprites/SpriteMatrixRegistry.js?v=20250208"></script>
    <script src="js/core/renderer/RendererConstants.js?v=20250208"></script>
    <script src="js/core/renderer/RendererPalette.js?v=20250208"></script>
    <script src="js/core/renderer/RendererSpriteFactory.js?v=20250208"></script>
    <script src="js/core/renderer/RendererCanvasHelper.js?v=20250208"></script>
    <script src="js/core/renderer/RendererTileRenderer.js?v=20250208"></script>
    <script src="js/core/renderer/RendererEntityRenderer.js?v=20250208"></script>
    <script src="js/core/renderer/RendererDialogRenderer.js?v=20250208"></script>
    <script src="js/core/renderer/RendererHudRenderer.js?v=20250208"></script>
    <script src="js/core/renderer/RendererMinimapRenderer.js?v=20250208"></script>
    <script src="js/core/renderer/RendererModuleBase.js?v=20250208"></script>
    <script src="js/core/renderer/RendererEffectsManager.js?v=20250208"></script>
    <script src="js/core/renderer/RendererTransitionManager.js?v=20250208"></script>
    <script src="js/core/renderer/RendererOverlayRenderer.js?v=20250208"></script>
    <script src="js/core/share/ShareConstants.js?v=20250208"></script>
    <script src="js/core/share/ShareMath.js?v=20250208"></script>
    <script src="js/core/share/ShareBase64.js?v=20250208"></script>
    <script src="js/core/share/ShareTextCodec.js?v=20250208"></script>
    <script src="js/core/share/ShareVariableCodec.js?v=20250208"></script>
    <script src="js/core/share/ShareMatrixCodec.js?v=20250208"></script>
    <script src="js/core/share/SharePositionCodec.js?v=20250208"></script>
    <script src="js/core/share/ShareDataNormalizer.js?v=20250208"></script>
    <script src="js/core/share/ShareEncoder.js?v=20250208"></script>
    <script src="js/core/share/ShareDecoder.js?v=20250208"></script>
    <script src="js/core/share/ShareUrlHelper.js?v=20250208"></script>
    <script src="js/core/TileDefinitions.js?v=20250208"></script>
    <script src="js/core/NPCDefinitions.js?v=20250208"></script>
    <script src="js/core/EnemyDefinitions.js?v=20250208"></script>
    <script src="js/core/ObjectDefinitions.js?v=20250208"></script>
    <script src="js/editor/modules/EditorConstants.js?v=20250208"></script>
    <script src="js/editor/modules/EditorDomCache.js?v=20250208"></script>
    <script src="js/editor/modules/EditorState.js?v=20250208"></script>
    <script src="js/editor/modules/EditorHistoryManager.js?v=20250208"></script>
    <script src="js/editor/modules/EditorShareService.js?v=20250301"></script>
    <script src="js/editor/manager/EditorManagerModule.js?v=20250208"></script>
    <script src="js/editor/manager/EditorEventBinder.js?v=20250208"></script>
    <script src="js/editor/manager/EditorUIController.js?v=20250208"></script>
    <script src="js/editor/manager/EditorInteractionController.js?v=20250208"></script>
    <script src="js/editor/modules/renderers/EditorRendererBase.js?v=20250208"></script>
    <script src="js/editor/modules/renderers/EditorCanvasRenderer.js?v=20250208"></script>
    <script src="js/editor/modules/renderers/EditorTilePanelRenderer.js?v=20250208"></script>
    <script src="js/editor/modules/renderers/EditorNpcRenderer.js?v=20250208"></script>
    <script src="js/editor/modules/renderers/EditorEnemyRenderer.js?v=20250208"></script>
    <script src="js/editor/modules/renderers/EditorObjectRenderer.js?v=20250208"></script>
    <script src="js/editor/modules/renderers/EditorWorldRenderer.js?v=20250208"></script>
    <script src="js/editor/modules/EditorRenderService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorTileService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorNpcService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorEnemyService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorObjectService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorVariableService.js?v=20250208"></script>
    <script src="js/editor/modules/EditorWorldService.js?v=20250208"></script>
    <script src="js/editor/EditorManager.js?v=20250208"></script>
    <script src="js/core/ShareUtils.js?v=20250208"></script>
    <script src="js/core/TileManager.js?v=20250208"></script>
    <script src="js/core/NPCManager.js?v=20250208"></script>
    <script src="js/core/InputManager.js?v=20250208"></script>
    <script src="js/core/Renderer.js?v=20250208"></script>
    <script src="js/core/engine/DialogManager.js?v=20250208"></script>
    <script src="js/core/engine/InteractionManager.js?v=20250208"></script>
    <script src="js/core/engine/EnemyManager.js?v=20250208"></script>
    <script src="js/core/engine/MovementManager.js?v=20250208"></script>
    <script src="js/core/GameEngine.js?v=20250208"></script>
    <script src="js/main.js?v=20250208"></script>
    <script src="js/editor/modules/EditorExportService.js?v=20250208"></script>
</body>
</html>










